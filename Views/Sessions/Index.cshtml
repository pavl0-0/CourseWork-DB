@model IEnumerable<Kino.Models.Session>

@{
    ViewData["Title"] = "Розклад сеансів";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="container">
    <div class="page-header">
        <h1 class="page-title">Розклад сеансів</h1>

        <a asp-action="Create" class="btn-cinema">Додати сеанс</a>
        <a asp-action="Generate" class="btn-cinema" style="background-color: #28a745; margin-right: 10px;">Авто-генератор</a>

        <a asp-action="BatchEdit" class="btn-cinema" style="background-color: #ffc107; color: #000; margin-right: 10px;">✏️ Мас. редагування</a>

        <a asp-action="BatchDelete" class="btn-cinema" style="background-color: darkred; margin-right: 15px;">Очистити</a>
    </div>

    <div style="background-color: #1e1e1e; padding: 15px; border-radius: 12px; margin-bottom: 25px; border: 1px solid #333; display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
        <span style="color: #aaa; font-weight: bold; font-size: 0.9rem; text-transform: uppercase;">Сортувати за:</span>

        <a asp-action="Index" asp-route-sortOrder="@ViewData["DateSortParm"]" class="btn btn-sm btn-outline-light" style="border-radius: 20px; padding: 5px 15px;">
            📅 Дата @(ViewData["DateSortParm"]?.ToString() == "" ? "⬇" : "⬆")
        </a>

        <a asp-action="Index" asp-route-sortOrder="@ViewData["FilmSortParm"]" class="btn btn-sm btn-outline-light" style="border-radius: 20px; padding: 5px 15px;">
            🎬 Фільм
        </a>

        <a asp-action="Index" asp-route-sortOrder="@ViewData["PriceSortParm"]" class="btn btn-sm btn-outline-light" style="border-radius: 20px; padding: 5px 15px;">
            💰 Ціна
        </a>

        <a asp-action="Index" asp-route-sortOrder="@ViewData["HallSortParm"]" class="btn btn-sm btn-outline-light" style="border-radius: 20px; padding: 5px 15px;">
            🏛 Зал
        </a>

        <a asp-action="Index" class="btn btn-sm text-muted" style="text-decoration: none;">❌ Скинути</a>
    </div>

    <div class="cinema-grid">
        @foreach (var item in Model)
        {
            <div class="genre-card" style="text-align: left; border-left: 5px solid var(--accent-color);">

                <div style="font-size: 1.5rem; font-weight: bold; color: white;">
                    @item.StartTime.ToString("HH:mm")
                </div>
                <div style="color: #b3b3b3; margin-bottom: 10px;">
                    @item.StartTime.ToString("dd.MM.yyyy")
                </div>

                <h5 style="color: var(--accent-color); font-weight: bold; margin-bottom: 5px;">
                    🎬 @item.Film.TitleUkrainian
                </h5>

                <p style="font-size: 0.9rem; color: #ccc;">
                    Зал №@item.Hall.HallNumber <br />
                    Ціна: <strong>@item.BaseTicketPrice грн</strong>
                </p>

                <div class="card-actions" style="margin-top: 15px; text-align: center;">
                    <a asp-action="Edit" asp-route-id="@item.SessionId">Edit</a> |
                    <a asp-action="Details" asp-route-id="@item.SessionId">Details</a> |
                    <a asp-action="Delete" asp-route-id="@item.SessionId" class="delete-link">Delete</a>
                </div>
            </div>
        }
    </div>
</div>